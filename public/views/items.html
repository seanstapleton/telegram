<div class="container" ng-init="initMenus()">

    <div class="modal" ng-if="pageData.active.tag">
        <div class="overlay" ng-click="removeActiveTag()"></div>
        <div class="modal-panel">
            <div class="header-info">
                <h2 class="left">Tag Settings</h2>
                <button class="btn btn-err btn-round left" style="margin-left: 10px" ng-click="deleteTag()">Delete tag</button>
            </div>
            <div class="input-group">
                <span class="addon">Name (note: this changes all menu items with this tag)</span>
                <input type="text" class="form-control addon" ng-init="pageData.active.tag.placeholder = pageData.active.tag.name" ng-model="pageData.active.tag.placeholder" ng-blur="updateTag()"/>
            </div>
            <div class="input-group">
                <span class="addon">Icon</span>
                <div class="img-addon" ng-if="pageData.active.tag.img.length > 0" style="background-image: url('{{pageData.active.tag.img}}')"></div>
                <input type="file" ngf-select accept="image/*" ngf-max-size="1MB" ngf-model-invalid="errorFile" class="form-control addon" ng-model="pageData.active.tag.imgFile"/>
                <button ng-click="uploadImg(pageData.active.tag, 'tag')">Submit</button>
            </div>
        </div>
    </div>

    <img class="icon-small abs-tr" ng-click="createCard('item')" src="/img/icons/new.svg"/>
    <div class="tag-nav box">
        <div class="tag-container" ng-repeat="tag in pageData.content[pageData.active.org.uniqname].items.uniqMenuTags" ng-class="{active: tag.active}">
            <p ng-click="toggleTag(tag)">{{tag.name}}</p>
            <img class="tag-setting" ng-click="pageData.active.tag = tag" src="/img/icons/settings.svg" ng-src="{{tag.active?'/img/icons/settings.svg':'/img/icons/settings-inactive.svg'}}"/>
        </div>
    </div>
    <ul class="container" style="padding: 20px 0" dnd-list="pageData.content[pageData.active.org.uniqname].items.data" dnd-inserted="dropCallback(index, item)">
        <li style="margin-bottom: 10px" dnd-draggable="item" dnd-dragstart="pageData.content[pageData.active.org.uniqname].items.placeholder = $index" dnd-moved="pageData.content[pageData.active.org.uniqname].items.data.splice($index, 1)" dnd-effect-allowed="move" dnd-selected="models.selected = item"
            ng-class="{'selected': models.selected === item}" class="card-min box" draggable="false" ng-repeat="item in pageData.content[pageData.active.org.uniqname].items.data | filter:tagShown | orderBy:'order'">
            <h2 ng-click="toggleCard(item._id)">{{item.title}} <span class="text-light pad-left text-small">({{item.price}})</span></h2>
            <div class="card-tools">
                <img class="duplicate" src="/img/icons/dup.svg" ng-click="dupCard('item', item)"/>
                <img class="delete" src="/img/icons/trash-1.svg" ng-click="deleteCard('item', item, $index)"/>
                <img class="move" src="/img/icons/move.svg"/>
            </div>
            <div class="card-edits" id="edits-{{item._id}}" ng-init="initPickers()">
                <div class="input-group">
                    <span class="addon">Title</span>
                    <input type="text" class="form-control addon" ng-model="item.title" ng-blur="updateCard('item', item)" placeholder="e.g. Live Music"/>
                </div>
                <div class="input-group">
                    <span class="addon">Description</span>
                    <input type="text" class="form-control addon" ng-model="item.description" ng-blur="updateCard('item', item)" placeholder="e.g. Center cut filet in a deep mushroom sauce"/>
                </div>
                <div class="input-group">
                    <span class="addon">Price</span>
                    <input type="text" class="form-control addon" ng-model="item.price" ng-blur="updateCard('item', item)"/>
                </div>
                <div class="input-group">
                    <span class="addon">Tags</span>
                    <input type="text" class="form-control addon" ng-model="item.tags" ng-blur="updateCard('item', item)" placeholder="e.g. appetizers, kids menu"/>
                </div>
            </div>
        </li>
    </ul>
</div>